{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { buildRecordObject } from '../utils';\n/**\r\n * Custom hook that uses local storage\r\n * @param key Key\r\n * @param defaultValue Default value\r\n */\n\nexport const useLocalStorageState = (key, defaultValue) => {\n  const [state, setState] = useState(() => {\n    const defaultObj = buildRecordObject(defaultValue);\n    let value;\n\n    try {\n      value = JSON.parse(window.localStorage.getItem(key) || JSON.stringify(defaultObj));\n    } catch (e) {\n      value = defaultObj;\n    }\n\n    return value;\n  });\n  useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(state));\n  }, [state, key]);\n  return [state, setState];\n};","map":{"version":3,"sources":["D:/Office/Project/www/nginx/html/Personal-Projects/portfolio-app/src/hooks/useLocalStorageState.ts"],"names":["useState","useEffect","buildRecordObject","useLocalStorageState","key","defaultValue","state","setState","defaultObj","value","JSON","parse","window","localStorage","getItem","stringify","e","setItem"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,SAASC,iBAAT,QAAkC,UAAlC;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,oBAAoB,GAAG,CAClCC,GADkC,EAElCC,YAFkC,KAM/B;AACH,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAuB,MAAM;AAC7D,UAAMQ,UAAU,GAAGN,iBAAiB,CAACG,YAAD,CAApC;AACA,QAAII,KAAJ;;AAEA,QAAI;AACFA,MAAAA,KAAK,GAAGC,IAAI,CAACC,KAAL,CACNC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BV,GAA5B,KAAoCM,IAAI,CAACK,SAAL,CAAeP,UAAf,CAD9B,CAAR;AAGD,KAJD,CAIE,OAAOQ,CAAP,EAAU;AACVP,MAAAA,KAAK,GAAGD,UAAR;AACD;;AACD,WAAOC,KAAP;AACD,GAZiC,CAAlC;AAcAR,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4Bb,GAA5B,EAAiCM,IAAI,CAACK,SAAL,CAAeT,KAAf,CAAjC;AACD,GAFQ,EAEN,CAACA,KAAD,EAAQF,GAAR,CAFM,CAAT;AAIA,SAAO,CAACE,KAAD,EAAQC,QAAR,CAAP;AACD,CA1BM","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { LocalCache } from '../models';\r\nimport { buildRecordObject } from '../utils';\r\n\r\n/**\r\n * Custom hook that uses local storage\r\n * @param key Key\r\n * @param defaultValue Default value\r\n */\r\nexport const useLocalStorageState = <T>(\r\n  key: string,\r\n  defaultValue: T,\r\n): [\r\n  LocalCache.Record<T>,\r\n  React.Dispatch<React.SetStateAction<LocalCache.Record<T>>>,\r\n] => {\r\n  const [state, setState] = useState<LocalCache.Record<T>>(() => {\r\n    const defaultObj = buildRecordObject(defaultValue);\r\n    let value;\r\n\r\n    try {\r\n      value = JSON.parse(\r\n        window.localStorage.getItem(key) || JSON.stringify(defaultObj),\r\n      ) as LocalCache.Record<T>;\r\n    } catch (e) {\r\n      value = defaultObj;\r\n    }\r\n    return value;\r\n  });\r\n\r\n  useEffect(() => {\r\n    window.localStorage.setItem(key, JSON.stringify(state));\r\n  }, [state, key]);\r\n\r\n  return [state, setState];\r\n};\r\n"]},"metadata":{},"sourceType":"module"}